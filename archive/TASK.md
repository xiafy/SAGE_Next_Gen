# TASK: ScannerView 多图拍摄 UX 升级 (DEC-034)

## 必读文件
- `app/src/views/ScannerView.tsx` — 当前实现
- `app/src/types/index.ts` — AppState/AppAction 定义
- `app/src/context/AppContext.tsx` — reducer 逻辑

## 需求概述
参考千问相机交互，升级 ScannerView 为单页/多页双模式。

## 具体改动

### 1. 单页/多页 Toggle（快门按钮上方）
- 胶囊式切换器，默认选中「单页」
- 视觉：选中项白色背景+深色文字，未选中项透明+白色文字
- 中文：「单页 / 多页」，英文：「Single / Multi」

### 2. 单页模式行为
- 拍照/选择 1 张后 → 自动跳转确认（不显示缩略图条，直接进入 handleConfirm 流程）
- 如果用户之前已有照片（不应该在单页模式出现，但防御性处理）→ 正常走确认

### 3. 多页模式行为
- 拍照后不退出，底部显示缩略图条（当前已有实现，保持）
- 每张缩略图带 × 删除按钮（当前已有，保持）
- 缩略图条右侧增加「去分析」按钮（中文：去分析，英文：Analyze）
  - 替代当前底部的「确认」按钮位置
  - 品牌色背景（bg-brand），白色文字，圆角
- 达到 5 张上限时，快门和相册按钮置灰

### 4. 相册多选
- 已支持 multiple 属性，保持不变
- 单页模式下：选择 1 张后自动确认
- 多页模式下：正常添加到缩略图条

### 5. 底部布局调整
- 三件套：相册入口（左）+ 快门（中）+ 占位（右）
- 快门上方：单页/多页 toggle
- 缩略图条在快门上方、toggle 下方
- 有照片时显示「去分析」按钮（多页模式）或自动确认（单页模式）

### 6. 不改动
- `AppState`/`AppAction` 不需要新增字段（scannerMode 只是组件内部状态）
- 图片压缩逻辑不变
- Path C (isSupplementing) 逻辑不变
- Worker API 不变

## 验收标准 (AC)
- [ ] 单页/多页 toggle 渲染正确，切换流畅
- [ ] 单页模式：拍 1 张 → 自动压缩+跳转 chat
- [ ] 多页模式：连续拍照，缩略图条显示，× 可删除
- [ ] 多页模式：「去分析」按钮点击 → 压缩+跳转 chat
- [ ] 相册单页模式：选 1 张 → 自动确认
- [ ] 相册多页模式：多选 → 添加到缩略图
- [ ] 达到 5 张时快门+相册按钮 disabled
- [ ] tsc 编译无错误
- [ ] 中英文文案正确
