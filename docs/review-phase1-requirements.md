# Phase 1 需求层审查报告

> 日期: 2026-03-01
> 审查人: SAGE Agent
> 状态: ⏳ 待 Mr. Xia 确认
> 方法论: `docs/quality-review-methodology.md`

---

## 审查范围

| 文档 | 行数 |
|------|------|
| `docs/vision.md` | 210 |
| `docs/prd.md` | 568 |
| `docs/user-stories.md` | 286 |
| `docs/competitive-analysis.md` | 220 |

---

## 一、场景真实性

### 🔴 R-001：缺少「套餐/定食/Course」场景

**现状**：PRD 全部假设单点（à la carte）模式。

**真实场景**：
- 日本定食（A套餐/B套餐，每个 course 选一个）
- 法餐 Prix Fixe（前菜/主菜/甜品各选一道）
- 泰国/中餐套餐（2-3人套餐含固定搭配）

**影响**：OrderCard 只有「菜品 × 数量」，无法表达「我选了套餐 A」。AI 推荐逻辑也没有套餐场景指令。用户在套餐型餐厅无法使用核心流程。

**建议**：
1. PRD 补充套餐场景描述和 AC
2. AI Prompt 增加套餐识别和推荐指令
3. OrderCard 支持「套餐」类型的展示

---

### 🟡 R-002：缺少「时价/无标价」菜品处理

**现状**：`price` 可为 `null`，但 OrderCard 合计金额会算成 ¥0。

**真实场景**：居酒屋"時価"、海鲜餐厅"market price"。

**影响**：产生误导性总价。

**建议**：
- 无价格时显示"时价"/"Market Price"标签
- 合计时标注"不含时价菜品"
- AI 提及这类菜品时主动告知用户需现场确认价格

---

### 🟡 R-003：拍照物理条件未被考虑

**现状**：F03 失败处理提到"图片模糊"但没有**拍摄引导**。

**真实场景**：暗光餐厅、反光塑封菜单、手写粉笔板、竖排文字。

**影响**：用户拍不好 → 识别失败 → 无有效引导 → 流失。

**建议**：
- Scanner 页面增加简洁拍照 tips（"确保光线充足，避免反光"）
- 识别失败时的引导文案更具体（"建议打开闪光灯"或"尝试从正上方拍摄"）

---

### 🟢 R-004：缺少「分享」场景

**现状**：无分享功能。

**影响**：错失自然增长杠杆，但不阻塞 MVP 核心价值。

**建议**：标注为 Future，不影响当前迭代。

---

## 二、需求完整性

### 🔴 R-005：US-019 引用已砍的 Path B

**现状**：US-019 写道"可以降级到随便聊聊模式"，但 PRD 明确标注 Path B 为 Backlog。

**影响**：识别失败时的降级路径不完整——用户除了「重拍」别无选择。

**建议（三选一）**：
1. 修改 US-019，将降级方案改为「重拍 + 文字补充菜品描述」（不等于完整 Path B）
2. 引入 Path B 的最小形态：识别失败后可用文字描述想吃什么，AI 给通用建议（不依赖菜单数据）
3. 明确标注：识别失败 = 产品无法服务的场景，只提供重拍

---

### 🟡 R-006：多人决策场景描述模糊

**现状**：US-012 说"4 人推荐 6-8 道"，但缺少冲突处理、共享菜品、代点模式。

**相关**：core-loop-closure-plan S3 场景有提到但无 AC。

**建议**：补充 S3 验收标准，至少在 Prompt 层面定义 AI 如何处理偏好冲突（如一人怕辣一人要辣）。

---

### 🟡 R-007：没有「回头客」场景

**现状**：偏好记了但菜单记忆没有持久化。无法识别"同一家餐厅"。

**建议**：明确标注为 Future，不是遗漏。在 PRD §7（不在 MVP 范围）中补充说明。

---

### 🟢 R-008：「修改已下单」路径无 AC

**现状**：WaiterMode → 继续点菜 → Order → Chat 流程逻辑上通的，但没有验收标准。

**建议**：补充 AC 到 F08（点餐单与展示模式）。

---

## 三、逻辑一致性

### 🔴 R-009：F02 AC6 与 DEC-040 矛盾

**现状**：
- PRD F02 AC6："图片上传前压缩至 **< 2MB**"
- DEC-040 实际设定：`maxDimension=1280`, `maxSizeBytes=500KB`

**建议**：更新 PRD F02 AC6 为实际参数，引用 DEC-040。

---

### 🟡 R-010：F06"返回 Home 需二次确认"未实现

**现状**：PRD 写"退出会清空当前会话，确定吗？"，代码直接跳 Home 无确认。

**建议**：由 Mr. Xia 判断——补实现，还是更新 PRD 删掉此要求。

---

### 🟡 R-011："≤3 轮对话完成决策"定义不清

**现状**：Pre-Chat 阶段的对话是否计入？加入 OrderCard 算不算一轮？追问算不算？

**建议**：明确操作性定义，如"主 Chat 阶段，从 AI 首次推荐到用户首次加入 OrderCard，对话轮次 ≤ 3"。

---

### 🟢 R-012：F03 AC2"识别成功率 ≥ 90%"没有测量方法

**现状**：无标准测试集、无评估标准。

**建议**：建立 benchmark 测试集（至少 20 张不同语言/风格菜单），定义"识别成功"= 菜品名称匹配率。

---

## 四、优先级合理性

### 🟡 R-013：竞品分析有多项"待验证"未跟进

**现状**：竞品分析写于 2026-02-25，含 4 项 ⚠️ 待验证。

**建议**：做一次快速竞品更新（web search），确认差异化假设仍然成立。

---

### 🟢 R-014：F07 A/B Test 计划无基础设施

**现状**：PRD 提到 A/B Test 计划但无数据采集能力。

**建议**：明确标注为 Post-MVP。

---

## 汇总

| 级别 | 数量 | 编号 |
|------|------|------|
| 🔴 关键 | 3 | R-001, R-005, R-009 |
| 🟡 重要 | 7 | R-002, R-003, R-006, R-007, R-010, R-011, R-013 |
| 🟢 次要 | 4 | R-004, R-008, R-012, R-014 |

**下一步**：Mr. Xia 确认每项的处理方式后，修订需求文档，闭环后进入 Phase 2 规格层审查。
