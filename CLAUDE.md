# CLAUDE.md â€” AI Agent å·¥ä½œæ‰‹å†Œ

> æ¯ä¸ª Agent åœ¨å¼€å§‹ä»»ä½•å·¥ä½œå‰å¿…é¡»å®Œæ•´é˜…è¯»æœ¬æ–‡ä»¶ã€‚  
> æœ¬æ–‡ä»¶æ˜¯æ‰€æœ‰ Agent çš„è¡Œä¸ºåŸºå‡†å’Œä¸Šä¸‹æ–‡å…¥å£ã€‚

---

## 0. é¡¹ç›®çŠ¶æ€é€ŸæŸ¥

åœ¨å¼€å§‹å·¥ä½œå‰ï¼Œå…ˆè¯»è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼š
1. `PROGRESS.md` â€” å½“å‰è¿›å±•ã€å“ªäº›å®Œæˆã€å“ªäº›è¿›è¡Œä¸­ã€å“ªäº›å¾…å¼€å§‹
2. `PLANNING.md` â€” å½“å‰ Sprint ä»»åŠ¡å’Œä¼˜å…ˆçº§

**ä¸è¦é‡å¤åšå·²å®Œæˆçš„å·¥ä½œã€‚ä¸è¦åœ¨ä¸äº†è§£å½“å‰çŠ¶æ€çš„æƒ…å†µä¸‹å¼€å§‹å†™ä»£ç ã€‚**

---

## 1. é¡¹ç›®ä¸€å¥è¯å®šä½

SAGE æ˜¯ä¸€ä¸ª**é¤é¥®æ™ºèƒ½ä½“ï¼ˆDining Agentï¼‰**ã€‚æ ¸å¿ƒä»·å€¼ï¼šç”¨æˆ·æ‹èœå• â†’ AI æ„ŸçŸ¥åœºæ™¯ â†’ å¯¹è¯æŽ¨è â†’ 30 ç§’å®Œæˆç‚¹é¤å†³ç­–ã€‚

è¯¦è§ `01_strategy/VISION.md`ã€‚

---

## 2. æ ¸å¿ƒè®¾è®¡å“²å­¦ï¼ˆç¦æ­¢è¿åï¼‰

| åŽŸåˆ™ | å«ä¹‰ | ç¦æ­¢è¡Œä¸º |
|------|------|---------|
| **Goal > Process** | åªè®¾ç»ˆæžç›®æ ‡ï¼Œæµç¨‹ç”± AI åŠ¨æ€ç”Ÿæˆ | âŒ å†™æ­»ä¸šåŠ¡é€»è¾‘æ ‘å’Œ if-else åœºæ™¯åˆ†æ”¯ |
| **Scenario-Free** | ä¸ç»™ç”¨æˆ·è´´æ ‡ç­¾ | âŒ é¢„è®¾"æ€¥è¡Œå†›/æŽ¢ç´¢è€…/é¿é›·é’ˆ"ç­‰ Persona |
| **æ„ŸçŸ¥å±‚ä¼˜å…ˆ** | ä¼  Contextï¼Œä¸åšåˆ¤æ–­ | âŒ åœ¨ä»£ç å±‚åšæŽ¨èå†³ç­–ï¼Œåº”äº¤ç»™ LLM |
| **Conversation-First** | å¯¹è¯é©±åŠ¨ï¼Œåˆ—è¡¨æ˜¯è¾…åŠ© | âŒ ä»¥åˆ—è¡¨/å¡ç‰‡ä¸ºä¸»ç•Œé¢ |

---

## 3. é¡¹ç›®ç›®å½•ç»“æž„

```
SAGE_Next_Gen/
â”œâ”€â”€ README.md              # äººç±»æ–‡æ¡£
â”œâ”€â”€ CLAUDE.md              # æœ¬æ–‡ä»¶ï¼ˆAgent å¿…è¯»ï¼‰
â”œâ”€â”€ PLANNING.md            # å·¥ä½œè®¡åˆ’ & Sprint
â”œâ”€â”€ PROGRESS.md            # å®žæ—¶è¿›å±•ï¼ˆæ¯å®Œæˆä¸€é¡¹ç«‹å³æ›´æ–°ï¼‰
â”œâ”€â”€ DECISIONS.md           # é‡è¦å†³ç­–è®°å½•ï¼ˆä»…è¿½åŠ ï¼Œä¸ä¿®æ”¹åŽ†å²ï¼‰
â”œâ”€â”€ 01_strategy/           # äº§å“æˆ˜ç•¥å±‚
â”‚   â””â”€â”€ VISION.md
â”œâ”€â”€ 02_product/            # äº§å“éœ€æ±‚å±‚
â”‚   â”œâ”€â”€ PRD.md
â”‚   â””â”€â”€ USER_STORIES.md
â”œâ”€â”€ 03_design/             # è®¾è®¡è§„èŒƒå±‚
â”‚   â”œâ”€â”€ UX_PRINCIPLES.md
â”‚   â””â”€â”€ VISUAL_DESIGN.md
â”œâ”€â”€ 04_technical/          # æŠ€æœ¯æ–¹æ¡ˆå±‚
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â”œâ”€â”€ API_DESIGN.md
â”‚   â””â”€â”€ DEPLOYMENT.md
â”œâ”€â”€ 05_implementation/     # ä»£ç å®žçŽ°
â”‚   â””â”€â”€ app/               # å‰ç«¯åº”ç”¨
â””â”€â”€ 06_testing/            # æµ‹è¯•
    â”œâ”€â”€ TEST_PLAN.md
    â”œâ”€â”€ TEST_CASES.md
    â””â”€â”€ reports/           # QA æŠ¥å‘Šï¼ˆæŒ‰æ—¥æœŸå‘½åï¼‰
```

---

## 4. å¸¸ç”¨å‘½ä»¤

```bash
# å¼€å‘
cd 05_implementation/app
pnpm install
pnpm dev          # å¯åŠ¨ dev serverï¼Œé»˜è®¤ http://localhost:5173

# æž„å»º
pnpm build        # å¿…é¡»é›¶ TS é”™è¯¯ã€é›¶ build è­¦å‘Šæ‰ç®—é€šè¿‡
pnpm preview      # é¢„è§ˆ build äº§ç‰©

# æµ‹è¯•
pnpm test         # è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test:watch   # ç›‘å¬æ¨¡å¼

# ä»£ç æ£€æŸ¥
pnpm lint
pnpm typecheck    # tsc --noEmit
```

---

## 5. æŠ€æœ¯æ ˆçº¦å®š

| å±‚ | æŠ€æœ¯ | æ³¨æ„äº‹é¡¹ |
|----|------|---------|
| å‰ç«¯æ¡†æž¶ | Vite + React + TypeScript | ä¸¥æ ¼ TypeScriptï¼Œç¦æ­¢ `any` |
| æ ·å¼ | Tailwind CSS v4 | v4 ä¸è¯» tailwind.config.jsï¼Œç”¨ CSS `@theme` é…ç½® |
| çŠ¶æ€ç®¡ç† | React hooksï¼ˆuseState/useReducer/Contextï¼‰ | ä¸å¼•å…¥ Redux/Zustandï¼Œä¿æŒç®€å• |
| API å±‚ | Cloudflare Workers | æ‰€æœ‰ AI API Key åªåœ¨ Worker ç«¯ï¼Œç¦æ­¢å‰ç«¯æš´éœ² |
| AI æ¨¡åž‹ | è§ä¸‹æ–¹æ¨¡åž‹ç­–ç•¥ | Gemini å…¨ç³»åˆ—å·²åºŸå¼ƒ |

### æ¨¡åž‹ä½¿ç”¨ç­–ç•¥
| åœºæ™¯ | æ¨¡åž‹ |
|------|------|
| æž¶æž„è®¾è®¡ / å¤æ‚é€»è¾‘ | `anthropic/claude-opus-4-6` |
| æ—¥å¸¸å¯¹è¯ / åŠŸèƒ½å®žçŽ° | `anthropic/claude-sonnet-4-6` |
| è½»é‡ä»»åŠ¡ | `fireworks/glm-5` æˆ– `fireworks/kimi-k2p5` |
| âš ï¸ ç¦ç”¨ | Google Gemini å…¨ç³»åˆ—ï¼ˆä¸¥é‡é™é€Ÿï¼‰ |

### Tailwind CSS v4 é…ç½®æ–¹å¼
```css
/* æ­£ç¡®æ–¹å¼ */
@import "tailwindcss";
@theme {
  --color-brand: #6366F1;
  --color-brand-dark: #4F46E5;
}

/* âŒ é”™è¯¯æ–¹å¼ï¼ˆv4 ä¸ç”Ÿæ•ˆï¼‰ */
/* tailwind.config.js ä¸­çš„ extend.colors */
```

---

## 6. å®‰å…¨çº¦å®šï¼ˆçº¢çº¿ï¼‰

- **âŒ ç¦æ­¢**å°†ä»»ä½• API Key å†™å…¥å‰ç«¯ä»£ç æˆ– git ä»“åº“
- **âŒ ç¦æ­¢** console.log æ®‹ç•™åœ¨ production ä»£ç 
- **âŒ ç¦æ­¢** `any` ç±»åž‹ï¼ˆTypeScript ä¸¥æ ¼æ¨¡å¼ï¼‰
- **âœ… å¿…é¡»** æ‰€æœ‰å¤–éƒ¨ API è°ƒç”¨é€šè¿‡ Cloudflare Worker ä»£ç†
- **âœ… å¿…é¡»** ç”¨ `zod` åšè¿è¡Œæ—¶ JSON æ ¡éªŒï¼ˆLLM è¿”å›žæ•°æ®ä¸å¯ä¿¡ï¼‰

---

## 7. ä»£ç è´¨é‡æ ‡å‡†

å®Œæˆä»»ä½•ä»£ç ä»»åŠ¡åŽï¼Œå¿…é¡»æ»¡è¶³ï¼š
- [ ] `npm run build` é›¶é”™è¯¯ã€é›¶è­¦å‘Š
- [ ] `tsc --noEmit` é›¶é”™è¯¯
- [ ] æ—  `any`ã€æ— å¤šä½™çš„ `console.log`

---

## 7.1 å¼ºåˆ¶ Codex å®¡è®¡ï¼ˆMr. Xia 2026-02-26 ç¡®ç«‹ï¼‰

**è§„åˆ™ï¼šClaude Code å®Œæˆä»»ä½•ä»»åŠ¡åŽï¼Œå¿…é¡»ç«‹å³è§¦å‘ Codex å®¡è®¡ï¼Œæ— ä¾‹å¤–ã€‚**

å®¡è®¡å¯¹è±¡ï¼šä»£ç å˜æ›´ + æ–‡æ¡£å˜æ›´ï¼ŒäºŒè€…å‡é¡»è¦†ç›–ã€‚

### å®¡è®¡æµç¨‹

```
Claude Code å®Œæˆ â†’ tsc + build é€šè¿‡ â†’ Codex å®¡è®¡ â†’ ä¿®å¤é—®é¢˜ â†’ git commit
                                            â†‘
                                     ä¸å¾—è·³è¿‡æ­¤æ­¥
```

### Codex å®¡è®¡ SOP

**Step 1**ï¼šåœ¨ä»»åŠ¡ç›®å½•å†™ `AUDIT_TASK.md`ï¼ˆå•å¼•å· heredoc é˜²å±•å¼€ï¼‰ï¼š

```bash
cat > AUDIT_TASK.md << 'ENDAUDIT'
ä½ æ˜¯èµ„æ·±å·¥ç¨‹å¸ˆï¼Œå®¡è®¡åˆšå®Œæˆçš„ä»£ç å˜æ›´ã€‚

## å˜æ›´å†…å®¹
[æè¿°æœ¬æ¬¡å˜æ›´åšäº†ä»€ä¹ˆ]

## å®¡è®¡è¦æ±‚
1. ä»£ç é€»è¾‘æ˜¯å¦ä¸Žä¸šåŠ¡éœ€æ±‚ä¸€è‡´ï¼ˆå¯¹ç…§ DECISIONS.md å…³é”®å†³ç­–ï¼‰
2. å‰åŽç«¯å¥‘çº¦æ˜¯å¦å¯¹é½ï¼ˆç±»åž‹/å­—æ®µå/ç»“æž„ï¼‰
3. é”™è¯¯å¤„ç†æ˜¯å¦å®Œæ•´ï¼ˆè¾¹ç•Œæƒ…å†µã€å¤±è´¥è·¯å¾„ï¼‰
4. çŠ¶æ€æœºè½¬æ¢æ˜¯å¦å®Œæ•´ï¼ˆæ— æ­»è·¯ã€æ— æ°¸ä¹… stuck çŠ¶æ€ï¼‰
5. æ–‡æ¡£æ˜¯å¦ä¸Žä»£ç åŒæ­¥ï¼ˆPROGRESS.md / EXECUTION_STATE.mdï¼‰

## è¾“å‡º
å°†å®¡è®¡æŠ¥å‘Šå†™å…¥ [REPORT_FILE].mdï¼Œæ ¼å¼ï¼š
ðŸ”´ ä¸¥é‡ / ðŸŸ¡ ä¸­ç­‰ / ðŸŸ¢ è½»å¾® / âœ… ä¼˜ç§€
æ¯é¡¹å«ï¼šä½ç½® + å½±å“ + ä¿®å¤å»ºè®®

å®ŒæˆåŽè¾“å‡ºï¼šAUDIT_DONE
ENDAUDIT
```

**Step 2**ï¼šå¯åŠ¨ Codexï¼ˆåœ¨æœ‰ git repo çš„ç›®å½•æ‰§è¡Œï¼‰ï¼š

```bash
exec pty:true background:true workdir:/path/to/project \
  command:"bash run_audit.sh"
```

å…¶ä¸­ `run_audit.sh`ï¼š
```bash
#!/bin/bash
TASK=$(cat AUDIT_TASK.md)
codex exec --full-auto "$TASK"
```

**Step 3**ï¼šCodex å®ŒæˆåŽï¼Œå¿…é¡»ä¿®å¤æ‰€æœ‰ ðŸ”´ ä¸¥é‡é—®é¢˜ï¼ŒðŸŸ¡ ä¸­ç­‰é—®é¢˜åŽŸåˆ™ä¸Šä¹Ÿä¿®å¤ã€‚

**Step 4**ï¼šä¿®å¤å®ŒæˆåŽå† git commitï¼ˆcommit message æ³¨æ˜Ž"ç» Codex å®¡è®¡"ï¼‰ã€‚

### æ–‡æ¡£å®¡è®¡è¦ç‚¹

Codex å®¡è®¡æ–‡æ¡£æ—¶æ£€æŸ¥ï¼š
- PROGRESS.md å½“å‰çŠ¶æ€æ˜¯å¦ä¸Žå®žé™…ä»£ç ä¸€è‡´
- EXECUTION_STATE.md ä»»åŠ¡é˜Ÿåˆ—çŠ¶æ€æ˜¯å¦æ­£ç¡®
- DECISIONS.md æ˜¯å¦é—æ¼æœ¬æ¬¡ä»»åŠ¡äº§ç”Ÿçš„æ–°å†³ç­–
- æŠ€æœ¯æ–‡æ¡£ï¼ˆARCHITECTURE / API_DESIGNï¼‰æ˜¯å¦éœ€è¦æ›´æ–°

---

## 8. è®°å¿†ä¸ŽçŠ¶æ€ç®¡ç†çº¦å®š

### Agent å·¥ä½œæ—¶å¿…é¡»éµå®ˆï¼š
1. **è¯»å…ˆäºŽå†™** â€” æ¯æ¬¡å¼€å§‹å·¥ä½œå‰å…ˆè¯» `PROGRESS.md` å’Œ `PLANNING.md`
2. **å®Œæˆå³æ›´æ–°** â€” æ¯å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œç«‹å³æ›´æ–° `PROGRESS.md`
3. **å†³ç­–å³è®°å½•** â€” åšäº†é‡è¦æŠ€æœ¯/äº§å“å†³ç­–ï¼Œç«‹å³è¿½åŠ åˆ° `DECISIONS.md`
4. **ç¦æ­¢ç§æœ‰è®°å¿†** â€” ä¸å¾—å°†é¡¹ç›®ä¿¡æ¯åªå­˜åœ¨ Agent è‡ªå·±çš„ MEMORY.mdï¼Œå¿…é¡»å†™å…¥æœ¬é¡¹ç›®ç›®å½•

### ä¸ºä»€ä¹ˆè¿™å¾ˆé‡è¦ï¼š
- é˜²æ­¢ä¸Šä¸‹æ–‡è¿‡è½½å¯¼è‡´è®°å¿†ä¸¢å¤±
- æ”¯æŒå¤š Agent åˆ†å·¥åä½œï¼ˆä»»ä½• Agent æŽ¥æ‰‹éƒ½èƒ½å¿«é€Ÿä¸Šä¸‹æ–‡ï¼‰
- æ”¯æŒäººå·¥å®¡æŸ¥å’Œä»‹å…¥

---

## 9. Multi-Agent åä½œåè®®

å½“å¤šä¸ª Agent å¹¶è¡Œå·¥ä½œæ—¶ï¼š

```
ä¸» Agentï¼ˆSAGEï¼‰     â€” äº§å“å†³ç­–ã€ä»»åŠ¡åˆ†å‘ã€è¿›åº¦æ±‡æ€»
å­ Agent A           â€” å…·ä½“æ¨¡å—å®žçŽ°ï¼ˆå¦‚å‰ç«¯ï¼‰
å­ Agent B           â€” å…·ä½“æ¨¡å—å®žçŽ°ï¼ˆå¦‚ APIï¼‰
å­ Agent Cï¼ˆQAï¼‰     â€” ç‹¬ç«‹æµ‹è¯•ï¼Œä¸ç”±å¼€å‘ Agent è‡ªæµ‹
```

**æ–‡ä»¶é”å®šçº¦å®š**ï¼ˆé˜²å†²çªï¼‰ï¼š
- æ¯ä¸ª Agent åœ¨ `PROGRESS.md` çš„"è¿›è¡Œä¸­"éƒ¨åˆ†å£°æ˜Žè‡ªå·±æ­£åœ¨å¤„ç†çš„æ–‡ä»¶
- å…¶ä»– Agent çœ‹åˆ°æ–‡ä»¶å·²è¢«å£°æ˜Žåˆ™ç­‰å¾…æˆ–é€‰æ‹©å…¶ä»–ä»»åŠ¡
- å®ŒæˆåŽè§£é™¤å£°æ˜Žï¼Œæ›´æ–°çŠ¶æ€ä¸º"å·²å®Œæˆ"

---

## 10. é‡Œç¨‹ç¢‘å®šä¹‰

| é‡Œç¨‹ç¢‘ | å®šä¹‰ | éªŒæ”¶æ ‡å‡† |
|--------|------|---------|
| **M1: æ–‡æ¡£å®Œå¤‡** | æ‰€æœ‰æ–‡æ¡£å±‚ï¼ˆ01-04ï¼‰å®Œæˆ | èƒ½ç»™æ–° Agent é˜…è¯»åŽç‹¬ç«‹æ‰§è¡Œ |
| **M2: MVP Alpha** | æ‹èœå•â†’å¯¹è¯æµç¨‹è·‘é€š | çœŸæœºå¯ç”¨ï¼Œæ—  P0 Bug |
| **M3: MVP Beta** | 4+1 æ„ŸçŸ¥å…¨éƒ¨æŽ¥å…¥ | é€šè¿‡å®Œæ•´æµ‹è¯•çŸ©é˜µ |
| **M4: å…¬æµ‹ä¸Šçº¿** | Cloudflare æ­£å¼éƒ¨ç½² | æ€§èƒ½ã€å®‰å…¨åŒè¾¾æ ‡ |

---

## 11. æ²Ÿé€šè§„èŒƒ

- é‡Œç¨‹ç¢‘å®Œæˆæ—¶ï¼Œä¸»åŠ¨å‘ Mr. Xia æŽ¨é€è¿›åº¦ï¼ˆé€šè¿‡ OpenClaw æ¶ˆæ¯ï¼‰
- é‡åˆ°é˜»å¡žï¼ˆæ— æ³•ç‹¬ç«‹è§£å†³ï¼‰æ—¶ç«‹å³ä¸ŠæŠ¥ï¼Œä¸è¦å¡ç€ä¸åŠ¨
- éžé˜»å¡žçš„å†³ç­–å¯è‡ªä¸»æ‰§è¡Œï¼Œäº‹åŽåœ¨ `DECISIONS.md` è®°å½•
- æ—¥å¸¸ä¸è¦é—®"æˆ‘å¯ä»¥å¼€å§‹äº†å—"ï¼Œæ”¶åˆ°ä»»åŠ¡å°±æ‰§è¡Œ
